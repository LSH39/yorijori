<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="direct">
	<select id="dmList" resultType="dm">
		select 
			dm_no as dmNo,
			member_no as memberNo,
			dm_receiver as dmReceiver,
			dm_sender as dmSender,
			dm_content as dmContent,
			dm_read_flag as dmReadFlag,
			dm_date as dmDate 
		from dm 
		where dm_no IN 
			(select max(dm_no) 
			from dm group by member_no) 
			order by dm_read_flag asc, dm_date desc
	</select>

	<select id="selectOneDm" parameterType="_int" resultType="dm">
		select 
			dm_no as dmNo,
			member_no as memberNo,
			dm_receiver as dmReceiver,
			dm_sender as dmSender,
			dm_content as dmContent,
			dm_read_flag as dmReadFlag,
			dm_date as dmDate 
		from dm 
		where member_no=#{memberNo}
	</select>
</mapper>
		<!-- 
		 -->
